import{d as z,S as A,T as L,P as N,A as V,C as $,a as E,u as F,b as D,c as H,e as K,r as g,f as M,w as R,o as j,g as U,h as y,_ as G,i as u,j as a,k as t,l as B,t as S,m as w,n as P,p as J,F as k,q as b,s as d,v as p,x as O,y as Q}from"./14454a06.js";import"https://unpkg.com/@waline/client@v2/dist/waline.mjs";const W=z({name:"ArResult",components:{Sidebar:A,TagBox:L,Paginator:N,ArticleCard:V,CategoryBox:$,SvgIcon:E},setup(){const{t:e}=F(),h=D(),v=H(),C=K(),x=g("search"),n=g(!1),s=g(new M),c=g({pageSize:12,pageTotal:0,page:1}),f="aurora-query-tag",m="aurora-query-category",l=g(),i=g(),r=()=>{l.value?q():i.value&&I(),window.scrollTo({top:0}),C.setTitle("search")},q=()=>{n.value=!1,v.fetchPostsByTag(l.value).then(o=>{n.value=!0,s.value=o,c.value.pageTotal=o.total})},I=()=>{n.value=!1,v.fetchPostsByCategory(i.value).then(o=>{n.value=!0,s.value=o,c.value.pageTotal=o.total})},_=()=>{i.value="",l.value="";const{tag:o,category:T}=h.query;T?i.value=T:o&&(l.value=o),(o||T)&&r()};return R(()=>h.query,()=>{_()}),j(()=>{_()}),U(()=>{localStorage.removeItem(f),localStorage.removeItem(m)}),{isLoading:y(()=>!n.value),isEmpty:y(()=>s.value.data.length===0&&n.value),categoryTitle:y(()=>i.value),tagTitle:y(()=>l.value),posts:s,pageType:x,pagination:c,pageChangeHandler:_,t:e}}}),X={class:"flex flex-col mt-10"},Y={class:"post-header"},Z={class:"flex flex-row gap-8"},ee={key:0,class:"post-title text-white uppercase"},ae={class:"opacity-60"},te={key:1,class:"post-title text-white uppercase"},oe={class:"opacity-60"},se={class:"main-grid"},ne={class:"relative"},le={class:"post-html flex flex-col items-center"},ie={class:"flex flex-col relative"},ce={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8"},re={class:"sidebar-box flex flex-col gap-8"};function ge(e,h,v,C,x,n){const s=d("SvgIcon"),c=d("ArticleCard"),f=d("Paginator"),m=d("CategoryBox"),l=d("TagBox"),i=d("Sidebar");return p(),u("div",X,[a("div",Y,[a("div",Z,[e.categoryTitle?(p(),u("h1",ee,[a("span",ae,[t(s,{"icon-class":"category",stroke:"white"})]),B(" "+S(e.categoryTitle),1)])):w("",!0),e.tagTitle?(p(),u("h1",te,[a("span",oe,[t(s,{"icon-class":"tag",stroke:"white"})]),B(" "+S(e.tagTitle),1)])):w("",!0)])]),a("div",se,[a("div",ne,[t(J,{name:"fade-slide-y",mode:"out-in"},{default:P(()=>[O(a("div",le,[a("h1",null,S(e.t("settings.no-search-result")),1),t(s,{"icon-class":"empty-search",style:{"font-size":"35rem"}})],512),[[Q,e.isEmpty]])]),_:1}),a("div",ie,[a("ul",ce,[e.isLoading||e.posts.data.length===0?(p(),u(k,{key:0},b(12,r=>a("li",{key:r},[t(c,{data:{}})])),64)):(p(!0),u(k,{key:1},b(e.posts.data,r=>(p(),u("li",{key:r.slug},[t(c,{data:r},null,8,["data"])]))),128))]),t(f,{pageSize:e.pagination.pageSize,pageTotal:e.pagination.pageTotal,page:e.pagination.page,onPageChange:e.pageChangeHandler},null,8,["pageSize","pageTotal","page","onPageChange"])])]),a("div",null,[t(i,null,{default:P(()=>[a("div",re,[t(m,{"sidebar-box":!1,"active-category":e.categoryTitle},null,8,["active-category"]),t(l,{"sidebar-box":!1,"active-tag":e.tagTitle},null,8,["active-tag"])])]),_:1})])])])}const pe=G(W,[["render",ge]]);export{pe as default};
