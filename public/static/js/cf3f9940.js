import{d as R,m as j,S as V,A as z,a0 as N,p as q,w as F,v as O,u as U,L as X,s as Y,b as G,q as J,r as $,a3 as D,X as K,y as Q,c as f,a4 as W,Y as Z,_ as x,g as n,i as e,k as E,t as u,F as tt,j as et,C as H,H as L,l as ot,h as i,D as I,E as st,e as d,R as M,f as a}from"./7666e050.js";import{T as at,u as nt}from"./24469cc7.js";import{C as it}from"./1715b85d.js";import{P as lt}from"./39006f29.js";import"https://unpkg.com/@waline/client@v2/dist/waline.mjs";const rt=R({name:"ARPost",components:{Sidebar:j,Toc:at,Comment:it,SubTitle:V,ArticleCard:z,Profile:N,SvgIcon:q,PostStats:lt},setup(){const t=F(),o=O(),c=U(),w=X(),v=Y(),k=G(),{t:l}=J(),r=$(new D),g=$(!0),h=$(),{enabledCommentPlugin:S}=K(),{initializeLightBox:T}=nt(),b=async()=>{var m,y;g.value=!0,r.value=new D,window.scrollTo({top:0});let s=String(v.params.slug);s=s.indexOf(",")?s.replace(/[,]+/g,"/"):s,await o.fetchPost(s).then(C=>{r.value=C,t.setTitle(r.value.title),w.setHeaderImage(C.cover),g.value=!1}),c.hexoConfig.writing.highlight.enable&&console.warn("[Aurora Config Error]: Please turn off [Hightlightjs]."),c.hexoConfig.writing.prismjs.enable&&console.warn("[Aurora Config Error]: Please turn off [prismjs]. "),await Z(),T(),(m=h.value)==null||m.getCommentCount(),(y=h.value)==null||y.getPostView()};Q(()=>v.params,s=>{s.slug&&v.fullPath.indexOf("#")===-1&&b()});const P=s=>{s===""&&(s=window.location.href),window.location.href=s},_=s=>{k.push({name:"post-search",query:{tag:s}})},A=s=>{k.push({name:"post-search",query:{category:s}})},p=f(()=>{var s,m,y,C;return r.value.author&&r.value.author.avatar?r.value.author.avatar:((m=(s=c.themeConfig)==null?void 0:s.site)==null?void 0:m.avatar)||((C=(y=c.themeConfig)==null?void 0:y.avatar)==null?void 0:C.source_path)||"/images/avatar.png"}),B=s=>{const m=s.target;m&&m.src!=="/images/avatar.png"&&(m.src="/images/avatar.png")};return{avatarClasses:f(()=>({"hover:opacity-50 cursor-pointer":!0,[c.themeConfig.theme.profile_shape]:!0})),avatarSrc:p,handleImageError:B,isMobile:f(()=>w.isMobile),currentPath:f(()=>v.path),pluginConfigs:f(()=>c.themeConfig.plugins),enabledComment:f(()=>r.value.comments&&S.value.plugin!==""),postStatsRef:h,SvgTypes:W,commonStore:w,fetchData:b,handleAuthorClick:P,navigateToTag:_,navigateToCategory:A,loading:g,post:r,t:l}},mounted(){this.fetchData()},beforeUnmount(){this.commonStore.resetHeaderImage()}}),pt={class:"flex flex-col mt-20"},ut={class:"main-grid"},mt={class:"post-header"},dt={class:"post-labels"},ct={key:2},gt=["onClick"],ht={key:2},ft={key:0,class:"post-title text-white"},vt={class:"flex flex-row items-center justify-start mt-8 mb-4"},yt={key:0,class:"post-footer"},Ct=["alt"],wt={class:"text-white opacity-80"},bt={class:"opacity-70"},kt={key:1,class:"post-footer"},St={class:"flex flex-row items-center"},Tt={class:"text-ob-dim mt-1"},Pt={class:"main-grid"},_t=["innerHTML"],At={key:1,class:"bg-ob-deep-800 px-14 py-16 rounded-2xl shadow-xl block min-h-screen"},$t={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols2 gap-6 mt-6"},Et={key:0,class:"flex flex-col w-full h-full mr-0 lg:mr-4"},It={key:1,class:"flex flex-col w-full h-full"},Bt={key:2,id:"comments"};function Dt(t,o,c,w,v,k){const l=d("ob-skeleton"),r=d("PostStats"),g=d("SubTitle"),h=d("ArticleCard"),S=d("Comment"),T=d("Profile"),b=d("Toc"),P=d("Sidebar"),_=M("lazy"),A=M("scroll-spy");return a(),n("div",pt,[e("div",ut,[e("div",mt,[e("span",dt,[t.loading?(a(),E(l,{key:0,tag:"b",height:"20px",width:"35px"})):!t.loading&&t.post.categories&&t.post.categories.length>0?(a(),n("b",{key:1,onClick:o[0]||(o[0]=p=>t.navigateToCategory(t.post.categories[0].slug))},[e("span",null,u(t.post.categories[0].name),1)])):(a(),n("b",ct,u(t.t("settings.default-category")),1)),e("ul",null,[t.loading?(a(),E(l,{key:0,count:2,tag:"li",height:"16px",width:"35px",class:"mr-2"})):!t.loading&&t.post.tags&&t.post.tags.length>0?(a(!0),n(tt,{key:1},et(t.post.tags,p=>(a(),n("li",{key:p.slug,onClick:B=>t.navigateToTag(p.slug)},[o[4]||(o[4]=e("em",{class:"opacity-50"},"#",-1)),H(" "+u(p.name),1)],8,gt))),128)):(a(),n("li",ht,[o[5]||(o[5]=e("b",{class:"opacity-50"},"#",-1)),H(" "+u(t.t("settings.default-tag")),1)]))])]),t.post.title?(a(),n("h1",ft,u(t.post.title),1)):(a(),E(l,{key:1,class:"post-title text-white uppercase",width:"100%",height:"clamp(1.2rem, calc(1rem + 3.5vw), 4rem)"})),e("div",vt,[t.post.author&&t.post.count_time.symbolsTime?(a(),n("div",yt,[L(e("img",{class:ot(t.avatarClasses),alt:`author-${t.post.author.name}`,onClick:o[1]||(o[1]=p=>t.handleAuthorClick(t.post.author.link)),onError:o[2]||(o[2]=(...p)=>t.handleImageError&&t.handleImageError(...p))},null,42,Ct),[[_,t.avatarSrc]]),e("span",wt,[e("strong",{class:"text-white pr-1.5 hover:opacity-50 cursor-pointer",onClick:o[3]||(o[3]=p=>t.handleAuthorClick(t.post.author.link))},u(t.post.author.name),1),e("span",bt,u(t.t("settings.shared-on"))+" "+u(t.t(t.post.date.month))+" "+u(t.post.date.day)+", "+u(t.post.date.year),1)])])):(a(),n("div",kt,[e("div",St,[i(l,{class:"mr-2",height:"28px",width:"28px",circle:!0}),e("span",Tt,[i(l,{height:"20px",width:"150px"})])])])),i(r,{"post-word-count":t.post.count_time.symbolsCount,"post-time-count":t.post.count_time.symbolsTime,"post-title":t.post.title,"current-path":t.currentPath,"plugin-configs":t.pluginConfigs,comments:t.enabledComment,ref:"postStatsRef"},null,8,["post-word-count","post-time-count","post-title","current-path","plugin-configs","comments"])])])]),e("div",Pt,[e("div",null,[t.post.content?L((a(),n("div",{key:0,class:"post-html",innerHTML:t.post.content},null,8,_t)),[[A,{sectionSelector:"h1, h2, h3, h4, h5, h6"}]]):(a(),n("div",At,[i(l,{tag:"div",count:1,height:"36px",width:"150px",class:"mb-6"}),o[6]||(o[6]=e("br",null,null,-1)),i(l,{tag:"div",count:35,height:"16px",width:"100px",class:"mr-2"}),o[7]||(o[7]=e("br",null,null,-1)),o[8]||(o[8]=e("br",null,null,-1)),i(l,{tag:"div",count:25,height:"16px",width:"100px",class:"mr-2"})])),e("div",$t,[t.post.prev_post.title?(a(),n("div",Et,[i(g,{title:"settings.paginator.prev",icon:"arrow-left-circle"}),i(h,{data:t.post.prev_post},null,8,["data"])])):I("",!0),t.post.next_post.title?(a(),n("div",It,[i(g,{title:"settings.paginator.next",side:t.isMobile?"left":"right",icon:"arrow-right-circle"},null,8,["side"]),i(h,{data:t.post.next_post},null,8,["data"])])):I("",!0)]),t.enabledComment&&t.post.title&&t.post.text&&t.post.uid?(a(),n("div",Bt,[i(S,{title:t.post.title,body:t.post.text,uid:t.post.uid},null,8,["title","body","uid"])])):I("",!0)]),e("div",null,[i(P,null,{default:st(()=>[i(T,{author:t.post.author.slug||""},null,8,["author"]),i(b,{toc:t.post.toc,comments:t.enabledComment},null,8,["toc","comments"])]),_:1})])])])}const Vt=x(rt,[["render",Dt]]);export{Vt as default};
