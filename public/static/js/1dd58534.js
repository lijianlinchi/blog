import{d as R,m as j,S as V,A as N,a0 as q,p as z,w as F,v as O,u as U,L as X,s as Y,b as G,q as J,r as $,a3 as D,X as K,y as Q,c as f,a4 as W,Y as Z,_ as x,g as n,i as e,k as E,t as u,F as tt,j as et,C as H,H as L,h as i,D as I,E as ot,e as c,R as M,f as a}from"./d8331267.js";import{T as st,u as at}from"./6f120788.js";import{C as nt}from"./77d74401.js";import{P as it}from"./ec402e12.js";import"https://unpkg.com/@waline/client@v2/dist/waline.mjs";const lt=R({name:"ARPost",components:{Sidebar:j,Toc:st,Comment:nt,SubTitle:V,ArticleCard:N,Profile:q,SvgIcon:z,PostStats:it},setup(){const t=F(),o=O(),m=U(),C=X(),v=Y(),k=G(),{t:l}=J(),r=$(new D),g=$(!0),h=$(),{enabledCommentPlugin:_}=K(),{initializeLightBox:S}=at(),b=async()=>{var d,y;g.value=!0,r.value=new D,window.scrollTo({top:0});let s=String(v.params.slug);s=s.indexOf(",")?s.replace(/[,]+/g,"/"):s,await o.fetchPost(s).then(w=>{r.value=w,t.setTitle(r.value.title),C.setHeaderImage(w.cover),g.value=!1}),m.hexoConfig.writing.highlight.enable&&console.warn("[Aurora Config Error]: Please turn off [Hightlightjs]."),m.hexoConfig.writing.prismjs.enable&&console.warn("[Aurora Config Error]: Please turn off [prismjs]. "),await Z(),S(),(d=h.value)==null||d.getCommentCount(),(y=h.value)==null||y.getPostView()};Q(()=>v.params,s=>{s.slug&&v.fullPath.indexOf("#")===-1&&b()});const T=s=>{s===""&&(s=window.location.href),window.location.href=s},P=s=>{k.push({name:"post-search",query:{tag:s}})},A=s=>{k.push({name:"post-search",query:{category:s}})},p=f(()=>{var s,d,y,w;return r.value.author&&r.value.author.avatar?r.value.author.avatar:((d=(s=m.themeConfig)==null?void 0:s.site)==null?void 0:d.avatar)||((w=(y=m.themeConfig)==null?void 0:y.avatar)==null?void 0:w.source_path)||"/images/avatar.png"}),B=s=>{const d=s.target;d&&d.src!=="/images/avatar.png"&&(d.src="/images/avatar.png")};return{avatarClasses:f(()=>({"hover:opacity-50 cursor-pointer":!0,[m.themeConfig.theme.profile_shape]:!0})),avatarSrc:p,handleImageError:B,isMobile:f(()=>C.isMobile),currentPath:f(()=>v.path),pluginConfigs:f(()=>m.themeConfig.plugins),enabledComment:f(()=>r.value.comments&&_.value.plugin!==""),postStatsRef:h,SvgTypes:W,commonStore:C,fetchData:b,handleAuthorClick:T,navigateToTag:P,navigateToCategory:A,loading:g,post:r,t:l}},mounted(){this.fetchData()},beforeUnmount(){this.commonStore.resetHeaderImage()}});const rt={class:"flex flex-col mt-20"},pt={class:"main-grid"},ut={class:"post-header"},dt={class:"post-labels"},ct={key:2},mt=["onClick"],gt={key:2},ht={key:0,class:"post-title text-white"},ft={class:"flex flex-row items-center justify-start flex-wrap gap-4 mt-8 mb-4"},vt={key:0,class:"post-footer"},yt={class:"hexagon-icon-wrapper"},wt={class:"hexagon-icon"},Ct=["alt"],bt={class:"text-white opacity-80"},kt={class:"opacity-70"},_t={key:1,class:"post-footer"},St={class:"flex flex-row items-center"},Tt={class:"text-ob-dim mt-1"},Pt={class:"main-grid"},At=["innerHTML"],$t={key:1,class:"bg-ob-deep-800 px-14 py-16 rounded-2xl shadow-xl block min-h-screen"},Et={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols2 gap-6 mt-6"},It={key:0,class:"flex flex-col w-full h-full mr-0 lg:mr-4"},Bt={key:1,class:"flex flex-col w-full h-full"},Dt={key:2,id:"comments"};function Ht(t,o,m,C,v,k){const l=c("ob-skeleton"),r=c("PostStats"),g=c("SubTitle"),h=c("ArticleCard"),_=c("Comment"),S=c("Profile"),b=c("Toc"),T=c("Sidebar"),P=M("lazy"),A=M("scroll-spy");return a(),n("div",rt,[e("div",pt,[e("div",ut,[e("span",dt,[t.loading?(a(),E(l,{key:0,tag:"b",height:"20px",width:"35px"})):!t.loading&&t.post.categories&&t.post.categories.length>0?(a(),n("b",{key:1,onClick:o[0]||(o[0]=p=>t.navigateToCategory(t.post.categories[0].slug))},[e("span",null,u(t.post.categories[0].name),1)])):(a(),n("b",ct,u(t.t("settings.default-category")),1)),e("ul",null,[t.loading?(a(),E(l,{key:0,count:2,tag:"li",height:"16px",width:"35px",class:"mr-2"})):!t.loading&&t.post.tags&&t.post.tags.length>0?(a(!0),n(tt,{key:1},et(t.post.tags,p=>(a(),n("li",{key:p.slug,onClick:B=>t.navigateToTag(p.slug)},[o[4]||(o[4]=e("em",{class:"opacity-50"},"#",-1)),H(" "+u(p.name),1)],8,mt))),128)):(a(),n("li",gt,[o[5]||(o[5]=e("b",{class:"opacity-50"},"#",-1)),H(" "+u(t.t("settings.default-tag")),1)]))])]),t.post.title?(a(),n("h1",ht,u(t.post.title),1)):(a(),E(l,{key:1,class:"post-title text-white uppercase",width:"100%",height:"clamp(1.2rem, calc(1rem + 3.5vw), 4rem)"})),e("div",ft,[t.post.author?(a(),n("div",vt,[e("div",yt,[e("div",wt,[L(e("img",{alt:`author-${t.post.author.name}`,onClick:o[1]||(o[1]=p=>t.handleAuthorClick(t.post.author.link)),onError:o[2]||(o[2]=(...p)=>t.handleImageError&&t.handleImageError(...p))},null,40,Ct),[[P,t.avatarSrc]])])]),e("span",bt,[e("strong",{class:"text-white pr-1.5 hover:opacity-50 cursor-pointer",onClick:o[3]||(o[3]=p=>t.handleAuthorClick(t.post.author.link))},u(t.post.author.name),1),e("span",kt,u(t.t("settings.shared-on"))+" "+u(t.t(t.post.date.month))+" "+u(t.post.date.day)+", "+u(t.post.date.year),1)])])):(a(),n("div",_t,[e("div",St,[i(l,{class:"mr-2",height:"28px",width:"28px",circle:!0}),e("span",Tt,[i(l,{height:"20px",width:"150px"})])])])),i(r,{"post-word-count":t.post.count_time.symbolsCount,"post-time-count":t.post.count_time.symbolsTime,"post-title":t.post.title,"current-path":t.currentPath,"plugin-configs":t.pluginConfigs,comments:t.enabledComment,ref:"postStatsRef"},null,8,["post-word-count","post-time-count","post-title","current-path","plugin-configs","comments"])])])]),e("div",Pt,[e("div",null,[t.post.content?L((a(),n("div",{key:0,class:"post-html",innerHTML:t.post.content},null,8,At)),[[A,{sectionSelector:"h1, h2, h3, h4, h5, h6"}]]):(a(),n("div",$t,[i(l,{tag:"div",count:1,height:"36px",width:"150px",class:"mb-6"}),o[6]||(o[6]=e("br",null,null,-1)),i(l,{tag:"div",count:35,height:"16px",width:"100px",class:"mr-2"}),o[7]||(o[7]=e("br",null,null,-1)),o[8]||(o[8]=e("br",null,null,-1)),i(l,{tag:"div",count:25,height:"16px",width:"100px",class:"mr-2"})])),e("div",Et,[t.post.prev_post.title?(a(),n("div",It,[i(g,{title:"settings.paginator.prev",icon:"arrow-left-circle"}),i(h,{data:t.post.prev_post},null,8,["data"])])):I("",!0),t.post.next_post.title?(a(),n("div",Bt,[i(g,{title:"settings.paginator.next",side:t.isMobile?"left":"right",icon:"arrow-right-circle"},null,8,["side"]),i(h,{data:t.post.next_post},null,8,["data"])])):I("",!0)]),t.enabledComment&&t.post.title&&t.post.text&&t.post.uid?(a(),n("div",Dt,[i(_,{title:t.post.title,body:t.post.text,uid:t.post.uid},null,8,["title","body","uid"])])):I("",!0)]),e("div",null,[i(T,null,{default:ot(()=>[i(S,{author:t.post.author.slug||""},null,8,["author"]),i(b,{toc:t.post.toc,comments:t.enabledComment},null,8,["toc","comments"])]),_:1})])])])}const Nt=x(lt,[["render",Ht],["__scopeId","data-v-c7978f79"]]);export{Nt as default};
